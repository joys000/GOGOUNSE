<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë‚˜ì˜ ì—°ì•  MBTIëŠ” ë­˜ê¹Œ?</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=SUITE&display=swap');

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'SUITE', sans-serif;
      background: linear-gradient(135deg, #FFF3E0, #FFE0B2);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .card {
      background: linear-gradient(145deg, #ffffff, #fff8f0);
      border-radius: 24px;
      box-shadow: 0 12px 32px rgba(0,0,0,0.1);
      padding: 40px 30px;
      width: 100%;
      max-width: 400px;
      text-align: center;
      position: relative;
    }

    h1 {
      font-size: 26px;
      color: #FF6F61;
      margin-bottom: 30px;
      line-height: 1.4;
    }

    .input-box {
      background: linear-gradient(145deg, #fffdf5, #fff7e6);
      border-radius: 12px;
      padding: 14px 16px;
      margin-bottom: 20px;
      box-shadow: inset 2px 2px 5px rgba(0,0,0,0.05),
                  inset -2px -2px 5px rgba(255,255,255,0.8);
      transition: transform 0.1s;
      text-align: left;
    }
    .input-box:active {
      transform: scale(0.98);
    }
    .input-box label {
      display: block;
      font-weight: 600;
      color: #555;
      margin-bottom: 6px;
    }
    .input-box input,
    .input-box select {
      width: 100%;
      padding: 10px 8px;
      border: none;
      border-radius: 8px;
      background: #fff;
      font-size: 16px;
      color: #333;
      box-shadow: inset 1px 1px 3px rgba(0,0,0,0.05);
      transition: background 0.3s, box-shadow 0.3s, transform 0.1s;
    }
    .input-box input:hover,
    .input-box select:hover {
      background: #f9f7f1;
    }
    .input-box input:focus,
    .input-box select:focus {
      outline: none;
      background: #fffdf5;
      box-shadow: 0 0 0 3px rgba(255,111,97,0.4);
      transform: scale(1.02);
    }

    .date-group {
      display: flex;
      gap: 10px;
    }
    .date-group select {
      flex: 1;
    }

    .gender-box {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 8px;
    }
    .gender-btn {
      flex: 1;
      padding: 10px 0;
      border-radius: 8px;
      cursor: pointer;
      user-select: none;
      transition: transform 0.1s, background 0.3s, box-shadow 0.3s;
      background: #eee;
      font-weight: 600;
      color: #666;
      text-align: center;
      box-shadow: inset 1px 1px 3px rgba(0,0,0,0.05),
                  inset -1px -1px 3px rgba(255,255,255,0.8);
    }
    .gender-btn:active {
      transform: scale(0.95);
    }
    .gender-btn.selected.male {
      background: linear-gradient(135deg, #81D4FA, #4FC3F7);
      color: #0277BD;
      box-shadow: 0 4px 10px rgba(0,123,255,0.2);
    }
    .gender-btn.selected.female {
      background: linear-gradient(135deg, #F48FB1, #F06292);
      color: #AD1457;
      box-shadow: 0 4px 10px rgba(255,64,129,0.2);
    }

    .submit-button {
      margin-top: 30px;
    }
    .submit-button button {
      width: 100%;
      padding: 14px 0;
      font-size: 16px;
      font-weight: 600;
      color: #fff;
      background: linear-gradient(135deg, #FF6F61, #FF8A65);
      border: none;
      border-radius: 16px;
      cursor: pointer;
      transition: transform 0.1s, box-shadow 0.2s;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .submit-button button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }
    .submit-button button:active {
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.12);
    }

    /* Loading overlay */
    .loading-overlay {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(255,255,255,0.8);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      border-radius: 24px;
      font-size: 18px;
      color: #FF6F61;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    .loading-overlay.show {
      opacity: 1;
      pointer-events: all;
    }
    .spinner {
      width: 50px;
      height: 50px;
      border: 6px solid #ffe0e0;
      border-top: 6px solid #FF6F61;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 12px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    @media (max-width: 480px) {
      .card { padding: 30px 20px; }
      h1 { font-size: 22px; }
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>ë‚˜ì˜ ì—°ì•  MBTIëŠ” ë­˜ê¹Œ?</h1>

    <div class="input-box">
      <label for="name">ì´ë¦„</label>
      <input type="text" id="name" placeholder="í™ê¸¸ë™">
    </div>

    <div class="input-box">
      <label>ìƒë…„ì›”ì¼</label>
      <div class="date-group">
        <select id="year"></select>
        <select id="month"></select>
        <select id="day"></select>
      </div>
    </div>

    <div class="input-box">
      <label>íƒœì–´ë‚œ ì‹œê°„</label>
      <select id="time">
        <option value="">-- ì„ íƒí•˜ì„¸ìš” --</option>
        <option value="å­">å­ (23:00~01:00)</option>
        <option value="ä¸‘">ä¸‘ (01:00~03:00)</option>
        <option value="å¯…">å¯… (03:00~05:00)</option>
        <option value="å¯">å¯ (05:00~07:00)</option>
        <option value="è¾°">è¾° (07:00~09:00)</option>
        <option value="å·³">å·³ (09:00~11:00)</option>
        <option value="åˆ">åˆ (11:00~13:00)</option>
        <option value="æœª">æœª (13:00~15:00)</option>
        <option value="ç”³">ç”³ (15:00~17:00)</option>
        <option value="é…‰">é…‰ (17:00~19:00)</option>
        <option value="æˆŒ">æˆŒ (19:00~21:00)</option>
        <option value="äº¥">äº¥ (21:00~23:00)</option>
      </select>
    </div>

    <div class="input-box">
      <label>ì„±ë³„</label>
      <div class="gender-box">
        <div class="gender-btn male" data-value="ë‚¨">ë‚¨ì</div>
        <div class="gender-btn female" data-value="ì—¬">ì—¬ì</div>
      </div>
    </div>

    <div class="submit-button">
      <button onclick="submitAndRedirect()">ğŸ’– ë‚˜ì˜ MBTI í™•ì¸í•˜ê¸°</button>
    </div>

    <div id="loading" class="loading-overlay">
      <div class="spinner"></div>
      MBTIë¥¼ ë¶„ì„ ì¤‘ì´ì—ìš”...
    </div>
  </div>

  <script>
    // ë…„Â·ì›”Â·ì¼ select ë™ì  ìƒì„±
    (function(){
      const yS = document.getElementById('year'),
            mS = document.getElementById('month'),
            dS = document.getElementById('day'),
            now = new Date(), cy = now.getFullYear();
      for(let y=cy; y>=1900; y--) yS.add(new Option(y, y));
      for(let m=1; m<=12; m++)   mS.add(new Option(m, m));
      function setDays(){
        dS.innerHTML = '';
        const y = +yS.value, m = +mS.value;
        if(!y||!m) return;
        const cnt = new Date(y, m, 0).getDate();
        for(let d=1; d<=cnt; d++) dS.add(new Option(d, d));
      }
      yS.onchange = setDays;
      mS.onchange = setDays;
    })();

    // ì„±ë³„ í† ê¸€
    document.querySelectorAll('.gender-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.gender-btn').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
      });
    });

    function submitAndRedirect() {
      const name = document.getElementById('name').value.trim(),
            year = document.getElementById('year').value,
            month = document.getElementById('month').value,
            day = document.getElementById('day').value,
            birthDate = (year&&month&&day) ? `${year}ë…„ ${month}ì›” ${day}ì¼` : '',
            timeSel = document.getElementById('time'),
            time = timeSel.value,
            genderBtn = document.querySelector('.gender-btn.selected'),
            gender = genderBtn ? genderBtn.dataset.value : null;

      let missing = [];
      if(!name)       missing.push('ì´ë¦„');
      if(!birthDate)  missing.push('ìƒë…„ì›”ì¼');
      if(!time)       missing.push('íƒœì–´ë‚œ ì‹œê°„');
      if(!gender)     missing.push('ì„±ë³„');

      if(missing.length) {
        alert(missing.join(', ') + 'ì„(ë¥¼) ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }

      // ë¡œë”© í‘œì‹œ
      const overlay = document.getElementById('loading');
      overlay.classList.add('show');

      // 3ì´ˆ í›„ ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™
      setTimeout(() => {
        // ê°’ ì €ì¥ (ê²°ê³¼ í˜ì´ì§€ì—ì„œ ì‚¬ìš© ê°€ëŠ¥)
        sessionStorage.setItem('mbtiName', name);
        sessionStorage.setItem('mbtiBirth', birthDate);
        sessionStorage.setItem('mbtiTime', timeSel.options[timeSel.selectedIndex].text);
        sessionStorage.setItem('mbtiGender', gender);
        window.location.href = 'MBTI_RESULT.html';
      }, 3000);
    }
  </script>
</body>
</html>
